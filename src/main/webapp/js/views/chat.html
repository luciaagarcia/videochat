<div class="oj-hybrid-applayout-page">
    <div class="oj-applayout-fixed-top">
        <header role="banner" class="oj-hybrid-applayout-header">
            <oj-module config="[[headerConfig]]"></oj-module>
        </header>
    </div>
    <div class="oj-applayout-content">
        <div role="main" class="oj-hybrid-applayout-content">
            <div class="oj-hybrid-padding">
                <h1>Fantástico videochat</h1>
                <span data-bind="html : estadoChatDeTexto"></span> - <span data-bind="html : estadoSignaling"></span><br>
                <strong data-bind="html : errorChatDeTexto" style="color : red"></strong> - <strong data-bind="html : errorSignaling" style="color : red"></strong>

                <!-- ko with : user -->
                <div class="oj-sm-12">
                    <div class="oj-sm-4">
                        <!-- ko if : picture -->
                        <img class="fotoperfil" data-bind="attr : { src : picture }" width="50" height="50">
                        <!-- /ko -->
                    </div>
                    <div class="oj-sm-4">
                        Conectado como <span data-bind="html : name"></span>
                    </div>
                    <div class="oj-sm-4"></div>
                </div>
                <!-- /ko -->
                <!--
                <div class="oj-sm-12">
                    <button data-bind="click : encenderVideoLocal">Encender vídeo local</button>
                    <button data-bind="click : crearConexion">Crear conexión</button>
                </div>
-->
                <!-- ko with : chat -->
                <div class="oj-sm-12 oj-flex">
                    <div class="oj-sm-6">
                        <h4>Usuarios</h4>
                        <div class="scroll" style="height: 200px;">
                            <!-- ko foreach : usuarios -->
                            <div class="row">
                                <!-- ko if : foto -->
                                <img class="fotoperfil row" data-bind="attr : { src : foto }" width="45" height="45">
                                <!-- /ko -->
                                <div id="Usuario">
                                    <div class="row">
                                        <a class="nombreUsuario column" data-bind="html : nombre, click : function() { $parent.setDestinatario($data);}"></a>
                                        <button class="botonLlamar button3 column" data-bind="click : function() { $parents[$parents.length-1].enviarOferta($data); }">Llamar</button>

                                    </div>
                                </div>
                                <hr style="border:2px; color:aqua">
                            </div>

                            <!-- /ko -->
                        </div>
                    </div>

                    <div class="oj-sm-4">
                        <h4>Mensajes de conexión</h4>
                        <div class="scroll" style="height: 200px;">
                            <!-- ko with : $parents[$parents.length-1].videoChat -->
                            <!-- ko foreach : mensajes -->
                            <div data-bind="html : texto, style : { color :  color }"></div>
                            <!-- /ko -->
                            <!-- /ko -->
                        </div>
                    </div>
                </div>

                <div class="oj-sm-12 oj-flex">
                    <div class="oj-sm-4">
                        <h4>Conversaciones privadas</h4>
                        <!-- ko foreach : conversaciones -->
                        <div data-bind="visible : visible">
                            <!-- ko with : nombreInterlocutor -->
                            Chat con <span data-bind="html : $data"></span>
                            <!-- /ko -->
                            <div class="scroll chat" style="height: 200px; width: 75%;">
                                <!-- ko foreach : mensajes -->
                                <div>
                                    <span data-bind="html : $data.hora"></span>:
                                    <span data-bind="html : $data.texto"></span>
                                </div>
                                <!-- /ko -->
                            </div>
                            <input type="text" data-bind="value : textoAEnviar" placeholder="Texto de tu mensaje">
                            <button data-bind="click : enviar">Enviar</button>
                            <button data-bind="click : obtenerMensajes">Recuperar Mensajes</button>
                        </div>
                        <!-- /ko -->
                    </div>
                    <div class="oj-sm-4">
                        <h4>Zona de vídeo</h4>
                        <video id="widgetVideoLocal" playsinline autoplay controls mute width="200" height="200"></video>
                        <video id="widgetVideoRemoto" playsinline autoplay controls width="200" height="200"></video>
                    </div>
                    <div class="oj-sm-4">
                        <h4>Mensajes a todos</h4>
                        <div class="scroll chat" style="height: 200px;">
                            <!-- ko foreach : mensajesRecibidos -->

                            <strong data-bind="html : hora"></strong> &nbsp;
                            <span data-bind="html : texto"></span>
                            <br>
                            <!-- /ko -->
                        </div>
                        <input type="text" size="50" data-bind="value : mensajeQueVoyAEnviar">
                        <button data-bind="click : enviarATodos">Enviar mensaje a todos</button>
                        <br>
                    </div>


                </div>
                <!-- /ko -->
            </div>
        </div>
    </div>
</div>